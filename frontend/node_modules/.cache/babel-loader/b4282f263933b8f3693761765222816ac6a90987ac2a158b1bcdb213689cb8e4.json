{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, vModelText as _vModelText, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, createBlock as _createBlock, vModelSelect as _vModelSelect, normalizeClass as _normalizeClass, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"anomaly-detection-container\"\n};\nconst _hoisted_2 = {\n  class: \"mb-6\"\n};\nconst _hoisted_3 = {\n  class: \"bg-gradient-to-r from-red-900/50 via-orange-900/50 to-yellow-900/50 rounded-xl p-6 border border-red-500/30\"\n};\nconst _hoisted_4 = {\n  class: \"flex items-center justify-between\"\n};\nconst _hoisted_5 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_6 = {\n  class: \"bg-red-500/20 p-3 rounded-lg mr-4\"\n};\nconst _hoisted_7 = {\n  class: \"flex items-center space-x-6\"\n};\nconst _hoisted_8 = {\n  class: \"text-center\"\n};\nconst _hoisted_9 = {\n  class: \"text-3xl font-bold text-red-400\"\n};\nconst _hoisted_10 = {\n  class: \"text-center\"\n};\nconst _hoisted_11 = {\n  class: \"text-3xl font-bold text-orange-400\"\n};\nconst _hoisted_12 = {\n  class: \"text-center\"\n};\nconst _hoisted_13 = {\n  class: \"text-3xl font-bold text-green-400\"\n};\nconst _hoisted_14 = {\n  class: \"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6\"\n};\nconst _hoisted_15 = {\n  class: \"lg:col-span-1 space-y-4\"\n};\nconst _hoisted_16 = {\n  class: \"bg-blue-900/30 rounded-xl p-4 border border-blue-500/30\"\n};\nconst _hoisted_17 = {\n  class: \"text-lg font-semibold text-white mb-3 flex items-center\"\n};\nconst _hoisted_18 = {\n  class: \"space-y-2\"\n};\nconst _hoisted_19 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_20 = {\n  key: 0,\n  class: \"bg-blue-900/30 rounded-xl p-4 border border-blue-500/30\"\n};\nconst _hoisted_21 = {\n  class: \"text-lg font-semibold text-white mb-3 flex items-center\"\n};\nconst _hoisted_22 = {\n  class: \"space-y-3\"\n};\nconst _hoisted_23 = {\n  class: \"bg-blue-900/30 rounded-xl p-4 border border-blue-500/30\"\n};\nconst _hoisted_24 = {\n  class: \"text-lg font-semibold text-white mb-3 flex items-center\"\n};\nconst _hoisted_25 = {\n  class: \"space-y-2\"\n};\nconst _hoisted_26 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_27 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_28 = [\"value\", \"disabled\"];\nconst _hoisted_29 = {\n  class: \"text-sm text-gray-300\"\n};\nconst _hoisted_30 = {\n  class: \"bg-blue-900/30 rounded-xl p-4 border border-blue-500/30\"\n};\nconst _hoisted_31 = {\n  class: \"text-lg font-semibold text-white mb-3 flex items-center\"\n};\nconst _hoisted_32 = {\n  class: \"space-y-3 text-sm\"\n};\nconst _hoisted_33 = {\n  class: \"space-y-2\"\n};\nconst _hoisted_34 = [\"disabled\"];\nconst _hoisted_35 = {\n  class: \"lg:col-span-3 space-y-6\"\n};\nconst _hoisted_36 = {\n  class: \"grid grid-cols-2 lg:grid-cols-4 gap-4\"\n};\nconst _hoisted_37 = {\n  class: \"bg-red-900/30 rounded-xl p-4 border border-red-500/30\"\n};\nconst _hoisted_38 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_39 = {\n  class: \"text-2xl font-bold text-white\"\n};\nconst _hoisted_40 = {\n  class: \"bg-orange-900/30 rounded-xl p-4 border border-orange-500/30\"\n};\nconst _hoisted_41 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_42 = {\n  class: \"text-2xl font-bold text-white\"\n};\nconst _hoisted_43 = {\n  class: \"bg-yellow-900/30 rounded-xl p-4 border border-yellow-500/30\"\n};\nconst _hoisted_44 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_45 = {\n  class: \"text-2xl font-bold text-white\"\n};\nconst _hoisted_46 = {\n  class: \"bg-blue-900/30 rounded-xl p-4 border border-blue-500/30\"\n};\nconst _hoisted_47 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_48 = {\n  class: \"text-2xl font-bold text-white\"\n};\nconst _hoisted_49 = {\n  class: \"bg-blue-900/30 rounded-xl border border-blue-500/30 overflow-hidden\"\n};\nconst _hoisted_50 = {\n  class: \"p-4 border-b border-blue-500/30 flex items-center justify-between\"\n};\nconst _hoisted_51 = {\n  class: \"text-xl font-semibold text-white flex items-center\"\n};\nconst _hoisted_52 = {\n  class: \"flex items-center space-x-2\"\n};\nconst _hoisted_53 = {\n  class: \"flex items-center text-sm text-gray-300\"\n};\nconst _hoisted_54 = [\"value\"];\nconst _hoisted_55 = {\n  class: \"relative\"\n};\nconst _hoisted_56 = {\n  key: 0,\n  class: \"absolute inset-0 flex items-center justify-center bg-blue-900/50\"\n};\nconst _hoisted_57 = {\n  class: \"bg-blue-900/30 rounded-xl border border-blue-500/30\"\n};\nconst _hoisted_58 = {\n  class: \"p-4 border-b border-blue-500/30 flex items-center justify-between\"\n};\nconst _hoisted_59 = {\n  class: \"text-xl font-semibold text-white flex items-center\"\n};\nconst _hoisted_60 = {\n  class: \"ml-2 px-2 py-1 bg-red-500/20 text-red-400 text-sm rounded\"\n};\nconst _hoisted_61 = {\n  class: \"flex items-center space-x-2\"\n};\nconst _hoisted_62 = {\n  class: \"max-h-96 overflow-y-auto\"\n};\nconst _hoisted_63 = {\n  key: 0,\n  class: \"p-8 text-center text-gray-400\"\n};\nconst _hoisted_64 = {\n  key: 1,\n  class: \"divide-y divide-blue-500/20\"\n};\nconst _hoisted_65 = [\"onClick\"];\nconst _hoisted_66 = {\n  class: \"flex items-start justify-between\"\n};\nconst _hoisted_67 = {\n  class: \"flex items-start\"\n};\nconst _hoisted_68 = {\n  class: \"flex-1\"\n};\nconst _hoisted_69 = {\n  class: \"flex items-center space-x-2\"\n};\nconst _hoisted_70 = {\n  class: \"text-white font-medium\"\n};\nconst _hoisted_71 = {\n  class: \"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded\"\n};\nconst _hoisted_72 = {\n  class: \"text-gray-300 text-sm mt-1\"\n};\nconst _hoisted_73 = {\n  class: \"flex items-center space-x-4 mt-2 text-xs text-gray-400\"\n};\nconst _hoisted_74 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_75 = {\n  key: 0,\n  class: \"flex items-center\"\n};\nconst _hoisted_76 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_77 = [\"onClick\"];\nconst _hoisted_78 = {\n  class: \"p-6\"\n};\nconst _hoisted_79 = {\n  class: \"flex items-center justify-between mb-4\"\n};\nconst _hoisted_80 = {\n  class: \"text-xl font-bold text-white flex items-center\"\n};\nconst _hoisted_81 = {\n  class: \"space-y-4\"\n};\nconst _hoisted_82 = {\n  class: \"grid grid-cols-2 gap-4\"\n};\nconst _hoisted_83 = {\n  class: \"text-white font-medium\"\n};\nconst _hoisted_84 = {\n  class: \"text-white\"\n};\nconst _hoisted_85 = {\n  key: 0\n};\nconst _hoisted_86 = {\n  class: \"text-white font-mono\"\n};\nconst _hoisted_87 = {\n  class: \"text-white font-mono text-sm\"\n};\nconst _hoisted_88 = {\n  class: \"text-white bg-blue-800/30 p-3 rounded\"\n};\nconst _hoisted_89 = {\n  key: 0\n};\nconst _hoisted_90 = {\n  class: \"bg-blue-800/30 p-3 rounded\"\n};\nconst _hoisted_91 = {\n  class: \"text-sm text-gray-300 whitespace-pre-wrap\"\n};\nconst _hoisted_92 = {\n  class: \"flex space-x-2 pt-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 页面标题和总览 \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createVNode($setup[\"AlertTriangleIcon\"], {\n    class: \"w-8 h-8 text-red-400\"\n  })]), _cache[15] || (_cache[15] = _createElementVNode(\"div\", null, [_createElementVNode(\"h2\", {\n    class: \"text-2xl font-bold text-white mb-1\"\n  }, \"异常数据侦测与可视化\"), _createElementVNode(\"p\", {\n    class: \"text-gray-300\"\n  }, \"智能识别交通异常事件，支持实时监控和历史分析\")], -1 /* CACHED */))]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, _toDisplayString($setup.statistics.total_count || 0), 1 /* TEXT */), _cache[16] || (_cache[16] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-300\"\n  }, \"异常事件\", -1 /* CACHED */))]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, _toDisplayString($setup.statistics.by_severity?.high || 0), 1 /* TEXT */), _cache[17] || (_cache[17] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-300\"\n  }, \"高危异常\", -1 /* CACHED */))]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, _toDisplayString($setup.isRealTimeMode ? '实时' : '历史'), 1 /* TEXT */), _cache[18] || (_cache[18] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-300\"\n  }, \"监控模式\", -1 /* CACHED */))])])])])]), _createCommentVNode(\" 控制面板 \"), _createElementVNode(\"div\", _hoisted_14, [_createCommentVNode(\" 检测配置 \"), _createElementVNode(\"div\", _hoisted_15, [_createCommentVNode(\" 模式切换 \"), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"h3\", _hoisted_17, [_createVNode($setup[\"SettingsIcon\"], {\n    class: \"w-5 h-5 mr-2\"\n  }), _cache[19] || (_cache[19] = _createTextVNode(\" 检测模式 \"))]), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"label\", _hoisted_19, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.isRealTimeMode = $event),\n    type: \"checkbox\",\n    class: \"mr-2 rounded bg-blue-900/50 border-blue-500/50 text-blue-500\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $setup.isRealTimeMode]]), _cache[20] || (_cache[20] = _createElementVNode(\"span\", {\n    class: \"text-white\"\n  }, \"实时监控模式\", -1 /* CACHED */))])])]), _createCommentVNode(\" 时间范围 \"), !$setup.isRealTimeMode ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [_createElementVNode(\"h3\", _hoisted_21, [_createVNode($setup[\"ClockIcon\"], {\n    class: \"w-5 h-5 mr-2\"\n  }), _cache[21] || (_cache[21] = _createTextVNode(\" 时间范围 \"))]), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"div\", null, [_cache[22] || (_cache[22] = _createElementVNode(\"label\", {\n    class: \"block text-sm text-gray-300 mb-1\"\n  }, \"开始时间\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.detectionParams.startTime = $event),\n    type: \"datetime-local\",\n    class: \"w-full p-2 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\",\n    min: $setup.minDate,\n    max: $setup.maxDate\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.detectionParams.startTime]])]), _createElementVNode(\"div\", null, [_cache[23] || (_cache[23] = _createElementVNode(\"label\", {\n    class: \"block text-sm text-gray-300 mb-1\"\n  }, \"结束时间\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.detectionParams.endTime = $event),\n    type: \"datetime-local\",\n    class: \"w-full p-2 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\",\n    min: $setup.minDate,\n    max: $setup.maxDate\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.detectionParams.endTime]])])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 检测类型 \"), _createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"h3\", _hoisted_24, [_createVNode($setup[\"ScanIcon\"], {\n    class: \"w-5 h-5 mr-2\"\n  }), _cache[24] || (_cache[24] = _createTextVNode(\" 异常类型 \"))]), _createElementVNode(\"div\", _hoisted_25, [_createElementVNode(\"label\", _hoisted_26, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.detectionParams.detectAll = $event),\n    type: \"checkbox\",\n    class: \"mr-2 rounded bg-blue-900/50 border-blue-500/50 text-blue-500\",\n    onChange: $setup.toggleDetectAll\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelCheckbox, $setup.detectionParams.detectAll]]), _cache[25] || (_cache[25] = _createElementVNode(\"span\", {\n    class: \"text-white font-medium\"\n  }, \"全部检测\", -1 /* CACHED */))]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.anomalyTypes, type => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: type.type,\n      class: \"ml-4\"\n    }, [_createElementVNode(\"label\", _hoisted_27, [_withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.detectionParams.selectedTypes = $event),\n      value: type.type,\n      type: \"checkbox\",\n      class: \"mr-2 rounded bg-blue-900/50 border-blue-500/50 text-blue-500\",\n      disabled: $setup.detectionParams.detectAll\n    }, null, 8 /* PROPS */, _hoisted_28), [[_vModelCheckbox, $setup.detectionParams.selectedTypes]]), _createElementVNode(\"span\", _hoisted_29, _toDisplayString(type.name), 1 /* TEXT */)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" 阈值配置 \"), _createElementVNode(\"div\", _hoisted_30, [_createElementVNode(\"h3\", _hoisted_31, [_createVNode($setup[\"SlidersHorizontalIcon\"], {\n    class: \"w-5 h-5 mr-2\"\n  }), _cache[26] || (_cache[26] = _createTextVNode(\" 检测阈值 \"))]), _createElementVNode(\"div\", _hoisted_32, [_createElementVNode(\"div\", null, [_cache[27] || (_cache[27] = _createElementVNode(\"label\", {\n    class: \"block text-gray-300 mb-1\"\n  }, \"停车时长 (分钟)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.thresholds.long_stop_duration_minutes = $event),\n    type: \"number\",\n    min: \"1\",\n    max: \"60\",\n    class: \"w-full p-2 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.thresholds.long_stop_duration_minutes, void 0, {\n    number: true\n  }]])]), _createElementVNode(\"div\", null, [_cache[28] || (_cache[28] = _createElementVNode(\"label\", {\n    class: \"block text-gray-300 mb-1\"\n  }, \"低速阈值 (km/h)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.thresholds.speed_threshold_low = $event),\n    type: \"number\",\n    min: \"1\",\n    max: \"20\",\n    class: \"w-full p-2 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.thresholds.speed_threshold_low, void 0, {\n    number: true\n  }]])]), _createElementVNode(\"div\", null, [_cache[29] || (_cache[29] = _createElementVNode(\"label\", {\n    class: \"block text-gray-300 mb-1\"\n  }, \"高速阈值 (km/h)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.thresholds.speed_threshold_high = $event),\n    type: \"number\",\n    min: \"40\",\n    max: \"150\",\n    class: \"w-full p-2 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.thresholds.speed_threshold_high, void 0, {\n    number: true\n  }]])]), _createElementVNode(\"div\", null, [_cache[30] || (_cache[30] = _createElementVNode(\"label\", {\n    class: \"block text-gray-300 mb-1\"\n  }, \"聚集密度\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $setup.thresholds.cluster_density = $event),\n    type: \"number\",\n    min: \"10\",\n    max: \"200\",\n    class: \"w-full p-2 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.thresholds.cluster_density, void 0, {\n    number: true\n  }]])])])]), _createCommentVNode(\" 控制按钮 \"), _createElementVNode(\"div\", _hoisted_33, [_createElementVNode(\"button\", {\n    onClick: $setup.startDetection,\n    disabled: $setup.isDetecting,\n    class: \"w-full btn-tech flex items-center justify-center\"\n  }, [$setup.isDetecting ? (_openBlock(), _createBlock($setup[\"LoaderIcon\"], {\n    key: 0,\n    class: \"w-4 h-4 mr-2 animate-spin\"\n  })) : (_openBlock(), _createBlock($setup[\"PlayIcon\"], {\n    key: 1,\n    class: \"w-4 h-4 mr-2\"\n  })), _createTextVNode(\" \" + _toDisplayString($setup.isDetecting ? '检测中...' : '开始检测'), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_34), _createElementVNode(\"button\", {\n    onClick: $setup.clearResults,\n    class: \"w-full btn-tech-secondary flex items-center justify-center\"\n  }, [_createVNode($setup[\"RefreshCwIcon\"], {\n    class: \"w-4 h-4 mr-2\"\n  }), _cache[31] || (_cache[31] = _createTextVNode(\" 清除结果 \"))])])]), _createCommentVNode(\" 主要内容区域 \"), _createElementVNode(\"div\", _hoisted_35, [_createCommentVNode(\" 统计卡片 \"), _createElementVNode(\"div\", _hoisted_36, [_createElementVNode(\"div\", _hoisted_37, [_createElementVNode(\"div\", _hoisted_38, [_createVNode($setup[\"AlertTriangleIcon\"], {\n    class: \"w-6 h-6 text-red-400 mr-3\"\n  }), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_39, _toDisplayString($setup.statistics.by_severity?.high || 0), 1 /* TEXT */), _cache[32] || (_cache[32] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-300\"\n  }, \"高危异常\", -1 /* CACHED */))])])]), _createElementVNode(\"div\", _hoisted_40, [_createElementVNode(\"div\", _hoisted_41, [_createVNode($setup[\"AlertCircleIcon\"], {\n    class: \"w-6 h-6 text-orange-400 mr-3\"\n  }), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_42, _toDisplayString($setup.statistics.by_severity?.medium || 0), 1 /* TEXT */), _cache[33] || (_cache[33] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-300\"\n  }, \"中危异常\", -1 /* CACHED */))])])]), _createElementVNode(\"div\", _hoisted_43, [_createElementVNode(\"div\", _hoisted_44, [_createVNode($setup[\"InfoIcon\"], {\n    class: \"w-6 h-6 text-yellow-400 mr-3\"\n  }), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_45, _toDisplayString($setup.statistics.by_severity?.low || 0), 1 /* TEXT */), _cache[34] || (_cache[34] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-300\"\n  }, \"低危异常\", -1 /* CACHED */))])])]), _createElementVNode(\"div\", _hoisted_46, [_createElementVNode(\"div\", _hoisted_47, [_createVNode($setup[\"BarChart3Icon\"], {\n    class: \"w-6 h-6 text-blue-400 mr-3\"\n  }), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_48, _toDisplayString(Object.keys($setup.statistics.by_type || {}).length), 1 /* TEXT */), _cache[35] || (_cache[35] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-300\"\n  }, \"异常类型\", -1 /* CACHED */))])])])]), _createCommentVNode(\" 地图可视化 \"), _createElementVNode(\"div\", _hoisted_49, [_createElementVNode(\"div\", _hoisted_50, [_createElementVNode(\"h3\", _hoisted_51, [_createVNode($setup[\"MapIcon\"], {\n    class: \"w-6 h-6 mr-2\"\n  }), _cache[36] || (_cache[36] = _createTextVNode(\" 异常事件地图 \"))]), _createElementVNode(\"div\", _hoisted_52, [_createElementVNode(\"label\", _hoisted_53, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $setup.showHeatmap = $event),\n    type: \"checkbox\",\n    class: \"mr-2 rounded bg-blue-900/50 border-blue-500/50 text-blue-500\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $setup.showHeatmap]]), _cache[37] || (_cache[37] = _createTextVNode(\" 热力图模式 \"))]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => $setup.selectedAnomalyTypeFilter = $event),\n    class: \"px-3 py-1 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\",\n    onChange: $setup.filterAnomaliesByType\n  }, [_cache[38] || (_cache[38] = _createElementVNode(\"option\", {\n    value: \"all\"\n  }, \"全部类型\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.anomalyTypes, type => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: type.type,\n      value: type.type\n    }, _toDisplayString(type.name), 9 /* TEXT, PROPS */, _hoisted_54);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.selectedAnomalyTypeFilter]])])]), _createElementVNode(\"div\", _hoisted_55, [_createElementVNode(\"div\", {\n    id: $setup.mapContainerId,\n    class: \"w-full h-96\"\n  }), !$setup.mapInitialized ? (_openBlock(), _createElementBlock(\"div\", _hoisted_56, _cache[39] || (_cache[39] = [_createElementVNode(\"div\", {\n    class: \"text-white\"\n  }, \"地图加载中...\", -1 /* CACHED */)]))) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" 异常事件列表 \"), _createElementVNode(\"div\", _hoisted_57, [_createElementVNode(\"div\", _hoisted_58, [_createElementVNode(\"h3\", _hoisted_59, [_createVNode($setup[\"ListIcon\"], {\n    class: \"w-6 h-6 mr-2\"\n  }), _cache[40] || (_cache[40] = _createTextVNode(\" 异常事件列表 \")), _createElementVNode(\"span\", _hoisted_60, _toDisplayString($setup.filteredAnomalies.length), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_61, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[11] || (_cache[11] = $event => $setup.sortBy = $event),\n    class: \"px-3 py-1 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\",\n    onChange: $setup.sortAnomalies\n  }, _cache[41] || (_cache[41] = [_createElementVNode(\"option\", {\n    value: \"timestamp\"\n  }, \"按时间排序\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"severity\"\n  }, \"按严重程度\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"type\"\n  }, \"按类型排序\", -1 /* CACHED */)]), 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.sortBy]]), _createElementVNode(\"button\", {\n    onClick: $setup.exportAnomalies,\n    class: \"px-3 py-1 bg-green-600/50 hover:bg-green-600/70 border border-green-500/50 rounded text-white text-sm flex items-center\"\n  }, [_createVNode($setup[\"DownloadIcon\"], {\n    class: \"w-4 h-4 mr-1\"\n  }), _cache[42] || (_cache[42] = _createTextVNode(\" 导出 \"))])])]), _createElementVNode(\"div\", _hoisted_62, [$setup.filteredAnomalies.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_63, [_createVNode($setup[\"ScanIcon\"], {\n    class: \"w-12 h-12 mx-auto mb-4 opacity-50\"\n  }), _cache[43] || (_cache[43] = _createElementVNode(\"p\", null, \"暂无异常事件\", -1 /* CACHED */)), _cache[44] || (_cache[44] = _createElementVNode(\"p\", {\n    class: \"text-sm mt-1\"\n  }, \"点击\\\"开始检测\\\"来搜索异常事件\", -1 /* CACHED */))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_64, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.filteredAnomalies.slice(0, 50), anomaly => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: anomaly.id,\n      class: \"p-4 hover:bg-blue-800/30 cursor-pointer transition-colors\",\n      onClick: $event => $setup.selectAnomaly(anomaly)\n    }, [_createElementVNode(\"div\", _hoisted_66, [_createElementVNode(\"div\", _hoisted_67, [_createElementVNode(\"div\", {\n      class: _normalizeClass([$setup.getSeverityIndicator(anomaly.severity), \"w-3 h-3 rounded-full mt-1 mr-3 flex-shrink-0\"])\n    }, null, 2 /* CLASS */), _createElementVNode(\"div\", _hoisted_68, [_createElementVNode(\"div\", _hoisted_69, [_createElementVNode(\"h4\", _hoisted_70, _toDisplayString(anomaly.name), 1 /* TEXT */), _createElementVNode(\"span\", {\n      class: _normalizeClass([$setup.getSeverityBadge(anomaly.severity), \"px-2 py-1 rounded text-xs font-medium\"])\n    }, _toDisplayString($setup.getSeverityText(anomaly.severity)), 3 /* TEXT, CLASS */), _createElementVNode(\"span\", _hoisted_71, _toDisplayString($setup.getTypeText(anomaly.type)), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_72, _toDisplayString(anomaly.description), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_73, [_createElementVNode(\"span\", _hoisted_74, [_createVNode($setup[\"ClockIcon\"], {\n      class: \"w-3 h-3 mr-1\"\n    }), _createTextVNode(\" \" + _toDisplayString($setup.formatTime(anomaly.timestamp)), 1 /* TEXT */)]), anomaly.vehicle_id ? (_openBlock(), _createElementBlock(\"span\", _hoisted_75, [_createVNode($setup[\"CarIcon\"], {\n      class: \"w-3 h-3 mr-1\"\n    }), _createTextVNode(\" 车辆: \" + _toDisplayString(anomaly.vehicle_id), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"span\", _hoisted_76, [_createVNode($setup[\"MapPinIcon\"], {\n      class: \"w-3 h-3 mr-1\"\n    }), _createTextVNode(\" \" + _toDisplayString(anomaly.latitude?.toFixed(4)) + \", \" + _toDisplayString(anomaly.longitude?.toFixed(4)), 1 /* TEXT */)])])])]), _createElementVNode(\"button\", {\n      onClick: _withModifiers($event => $setup.locateOnMap(anomaly), [\"stop\"]),\n      class: \"px-2 py-1 bg-cyan-600/50 hover:bg-cyan-600/70 border border-cyan-500/50 rounded text-white text-xs flex items-center\"\n    }, [_createVNode($setup[\"EyeIcon\"], {\n      class: \"w-3 h-3 mr-1\"\n    }), _cache[45] || (_cache[45] = _createTextVNode(\" 定位 \"))], 8 /* PROPS */, _hoisted_77)])], 8 /* PROPS */, _hoisted_65);\n  }), 128 /* KEYED_FRAGMENT */))]))])])])]), _createCommentVNode(\" 详情模态框 \"), $setup.selectedAnomaly ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"fixed inset-0 bg-black/50 flex items-center justify-center z-50\",\n    onClick: $setup.closeAnomalyDetail\n  }, [_createElementVNode(\"div\", {\n    class: \"bg-blue-900 rounded-xl border border-blue-500/50 max-w-2xl w-full m-4 max-h-[80vh] overflow-y-auto\",\n    onClick: _cache[14] || (_cache[14] = _withModifiers(() => {}, [\"stop\"]))\n  }, [_createElementVNode(\"div\", _hoisted_78, [_createElementVNode(\"div\", _hoisted_79, [_createElementVNode(\"h3\", _hoisted_80, [_createVNode($setup[\"AlertTriangleIcon\"], {\n    class: \"w-6 h-6 mr-2 text-red-400\"\n  }), _cache[46] || (_cache[46] = _createTextVNode(\" 异常事件详情 \"))]), _createElementVNode(\"button\", {\n    onClick: $setup.closeAnomalyDetail,\n    class: \"text-gray-400 hover:text-white\"\n  }, [_createVNode($setup[\"XIcon\"], {\n    class: \"w-6 h-6\"\n  })])]), _createElementVNode(\"div\", _hoisted_81, [_createElementVNode(\"div\", _hoisted_82, [_createElementVNode(\"div\", null, [_cache[47] || (_cache[47] = _createElementVNode(\"label\", {\n    class: \"block text-sm text-gray-300 mb-1\"\n  }, \"异常类型\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_83, _toDisplayString($setup.selectedAnomaly.name), 1 /* TEXT */)]), _createElementVNode(\"div\", null, [_cache[48] || (_cache[48] = _createElementVNode(\"label\", {\n    class: \"block text-sm text-gray-300 mb-1\"\n  }, \"严重程度\", -1 /* CACHED */)), _createElementVNode(\"span\", {\n    class: _normalizeClass([$setup.getSeverityBadge($setup.selectedAnomaly.severity), \"px-3 py-1 rounded font-medium\"])\n  }, _toDisplayString($setup.getSeverityText($setup.selectedAnomaly.severity)), 3 /* TEXT, CLASS */)]), _createElementVNode(\"div\", null, [_cache[49] || (_cache[49] = _createElementVNode(\"label\", {\n    class: \"block text-sm text-gray-300 mb-1\"\n  }, \"发生时间\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_84, _toDisplayString($setup.formatTime($setup.selectedAnomaly.timestamp)), 1 /* TEXT */)]), $setup.selectedAnomaly.vehicle_id ? (_openBlock(), _createElementBlock(\"div\", _hoisted_85, [_cache[50] || (_cache[50] = _createElementVNode(\"label\", {\n    class: \"block text-sm text-gray-300 mb-1\"\n  }, \"车辆ID\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_86, _toDisplayString($setup.selectedAnomaly.vehicle_id), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", null, [_cache[51] || (_cache[51] = _createElementVNode(\"label\", {\n    class: \"block text-sm text-gray-300 mb-1\"\n  }, \"位置坐标\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_87, _toDisplayString($setup.selectedAnomaly.latitude?.toFixed(6)) + \", \" + _toDisplayString($setup.selectedAnomaly.longitude?.toFixed(6)), 1 /* TEXT */)])]), _createElementVNode(\"div\", null, [_cache[52] || (_cache[52] = _createElementVNode(\"label\", {\n    class: \"block text-sm text-gray-300 mb-1\"\n  }, \"详细描述\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_88, _toDisplayString($setup.selectedAnomaly.description), 1 /* TEXT */)]), $setup.selectedAnomaly.details ? (_openBlock(), _createElementBlock(\"div\", _hoisted_89, [_cache[53] || (_cache[53] = _createElementVNode(\"label\", {\n    class: \"block text-sm text-gray-300 mb-2\"\n  }, \"技术详情\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_90, [_createElementVNode(\"pre\", _hoisted_91, _toDisplayString(JSON.stringify($setup.selectedAnomaly.details, null, 2)), 1 /* TEXT */)])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_92, [_createElementVNode(\"button\", {\n    onClick: _cache[12] || (_cache[12] = $event => $setup.locateOnMap($setup.selectedAnomaly)),\n    class: \"flex-1 btn-tech flex items-center justify-center\"\n  }, [_createVNode($setup[\"MapPinIcon\"], {\n    class: \"w-4 h-4 mr-2\"\n  }), _cache[54] || (_cache[54] = _createTextVNode(\" 在地图上定位 \"))]), _createElementVNode(\"button\", {\n    onClick: _cache[13] || (_cache[13] = $event => $setup.exportSingleAnomaly($setup.selectedAnomaly)),\n    class: \"flex-1 btn-tech-secondary flex items-center justify-center\"\n  }, [_createVNode($setup[\"DownloadIcon\"], {\n    class: \"w-4 h-4 mr-2\"\n  }), _cache[55] || (_cache[55] = _createTextVNode(\" 导出详情 \"))])])])])])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_createVNode","$setup","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","statistics","total_count","_hoisted_10","_hoisted_11","by_severity","high","_hoisted_12","_hoisted_13","isRealTimeMode","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","$event","type","_hoisted_20","_hoisted_21","_hoisted_22","detectionParams","startTime","min","minDate","max","maxDate","endTime","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","detectAll","onChange","toggleDetectAll","_Fragment","_renderList","anomalyTypes","key","_hoisted_27","selectedTypes","value","disabled","_hoisted_29","name","_hoisted_30","_hoisted_31","_hoisted_32","thresholds","long_stop_duration_minutes","number","speed_threshold_low","speed_threshold_high","cluster_density","_hoisted_33","onClick","startDetection","isDetecting","_createBlock","clearResults","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","medium","_hoisted_43","_hoisted_44","_hoisted_45","low","_hoisted_46","_hoisted_47","_hoisted_48","Object","keys","by_type","length","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","showHeatmap","selectedAnomalyTypeFilter","filterAnomaliesByType","_hoisted_54","_hoisted_55","id","mapContainerId","mapInitialized","_hoisted_56","_cache","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","filteredAnomalies","_hoisted_61","sortBy","sortAnomalies","exportAnomalies","_hoisted_62","_hoisted_63","_hoisted_64","slice","anomaly","selectAnomaly","_hoisted_66","_hoisted_67","_normalizeClass","getSeverityIndicator","severity","_hoisted_68","_hoisted_69","_hoisted_70","getSeverityBadge","getSeverityText","_hoisted_71","getTypeText","_hoisted_72","description","_hoisted_73","_hoisted_74","formatTime","timestamp","vehicle_id","_hoisted_75","_hoisted_76","latitude","toFixed","longitude","_withModifiers","locateOnMap","selectedAnomaly","closeAnomalyDetail","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","details","_hoisted_89","_hoisted_90","_hoisted_91","JSON","stringify","_hoisted_92","exportSingleAnomaly"],"sources":["E:\\hhh\\frontend\\src\\modules\\trafficVisualization\\TrafficAnomaly.vue"],"sourcesContent":["<template>\r\n  <div class=\"anomaly-detection-container\">\r\n    <!-- 页面标题和总览 -->\r\n    <div class=\"mb-6\">\r\n      <div class=\"bg-gradient-to-r from-red-900/50 via-orange-900/50 to-yellow-900/50 rounded-xl p-6 border border-red-500/30\">\r\n        <div class=\"flex items-center justify-between\">\r\n          <div class=\"flex items-center\">\r\n            <div class=\"bg-red-500/20 p-3 rounded-lg mr-4\">\r\n              <AlertTriangleIcon class=\"w-8 h-8 text-red-400\" />\r\n            </div>\r\n            <div>\r\n              <h2 class=\"text-2xl font-bold text-white mb-1\">异常数据侦测与可视化</h2>\r\n              <p class=\"text-gray-300\">智能识别交通异常事件，支持实时监控和历史分析</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"flex items-center space-x-6\">\r\n            <div class=\"text-center\">\r\n              <div class=\"text-3xl font-bold text-red-400\">{{ statistics.total_count || 0 }}</div>\r\n              <div class=\"text-sm text-gray-300\">异常事件</div>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <div class=\"text-3xl font-bold text-orange-400\">{{ statistics.by_severity?.high || 0 }}</div>\r\n              <div class=\"text-sm text-gray-300\">高危异常</div>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <div class=\"text-3xl font-bold text-green-400\">{{ isRealTimeMode ? '实时' : '历史' }}</div>\r\n              <div class=\"text-sm text-gray-300\">监控模式</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 控制面板 -->\r\n    <div class=\"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6\">\r\n      <!-- 检测配置 -->\r\n      <div class=\"lg:col-span-1 space-y-4\">\r\n        <!-- 模式切换 -->\r\n        <div class=\"bg-blue-900/30 rounded-xl p-4 border border-blue-500/30\">\r\n          <h3 class=\"text-lg font-semibold text-white mb-3 flex items-center\">\r\n            <SettingsIcon class=\"w-5 h-5 mr-2\" />\r\n            检测模式\r\n          </h3>\r\n          <div class=\"space-y-2\">\r\n            <label class=\"flex items-center\">\r\n              <input \r\n                v-model=\"isRealTimeMode\" \r\n                type=\"checkbox\" \r\n                class=\"mr-2 rounded bg-blue-900/50 border-blue-500/50 text-blue-500\"\r\n              />\r\n              <span class=\"text-white\">实时监控模式</span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 时间范围 -->\r\n        <div class=\"bg-blue-900/30 rounded-xl p-4 border border-blue-500/30\" v-if=\"!isRealTimeMode\">\r\n          <h3 class=\"text-lg font-semibold text-white mb-3 flex items-center\">\r\n            <ClockIcon class=\"w-5 h-5 mr-2\" />\r\n            时间范围\r\n          </h3>\r\n          <div class=\"space-y-3\">\r\n            <div>\r\n              <label class=\"block text-sm text-gray-300 mb-1\">开始时间</label>\r\n              <input \r\n                v-model=\"detectionParams.startTime\"\r\n                type=\"datetime-local\" \r\n                class=\"w-full p-2 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\"\r\n                :min=\"minDate\"\r\n                :max=\"maxDate\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm text-gray-300 mb-1\">结束时间</label>\r\n              <input \r\n                v-model=\"detectionParams.endTime\"\r\n                type=\"datetime-local\" \r\n                class=\"w-full p-2 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\"\r\n                :min=\"minDate\"\r\n                :max=\"maxDate\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 检测类型 -->\r\n        <div class=\"bg-blue-900/30 rounded-xl p-4 border border-blue-500/30\">\r\n          <h3 class=\"text-lg font-semibold text-white mb-3 flex items-center\">\r\n            <ScanIcon class=\"w-5 h-5 mr-2\" />\r\n            异常类型\r\n          </h3>\r\n          <div class=\"space-y-2\">\r\n            <label class=\"flex items-center\">\r\n              <input \r\n                v-model=\"detectionParams.detectAll\" \r\n                type=\"checkbox\" \r\n                class=\"mr-2 rounded bg-blue-900/50 border-blue-500/50 text-blue-500\"\r\n                @change=\"toggleDetectAll\"\r\n              />\r\n              <span class=\"text-white font-medium\">全部检测</span>\r\n            </label>\r\n            <div v-for=\"type in anomalyTypes\" :key=\"type.type\" class=\"ml-4\">\r\n              <label class=\"flex items-center\">\r\n                <input \r\n                  v-model=\"detectionParams.selectedTypes\" \r\n                  :value=\"type.type\"\r\n                  type=\"checkbox\" \r\n                  class=\"mr-2 rounded bg-blue-900/50 border-blue-500/50 text-blue-500\"\r\n                  :disabled=\"detectionParams.detectAll\"\r\n                />\r\n                <span class=\"text-sm text-gray-300\">{{ type.name }}</span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 阈值配置 -->\r\n        <div class=\"bg-blue-900/30 rounded-xl p-4 border border-blue-500/30\">\r\n          <h3 class=\"text-lg font-semibold text-white mb-3 flex items-center\">\r\n            <SlidersHorizontalIcon class=\"w-5 h-5 mr-2\" />\r\n            检测阈值\r\n          </h3>\r\n          <div class=\"space-y-3 text-sm\">\r\n            <div>\r\n              <label class=\"block text-gray-300 mb-1\">停车时长 (分钟)</label>\r\n              <input \r\n                v-model.number=\"thresholds.long_stop_duration_minutes\"\r\n                type=\"number\" \r\n                min=\"1\" \r\n                max=\"60\"\r\n                class=\"w-full p-2 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-gray-300 mb-1\">低速阈值 (km/h)</label>\r\n              <input \r\n                v-model.number=\"thresholds.speed_threshold_low\"\r\n                type=\"number\" \r\n                min=\"1\" \r\n                max=\"20\"\r\n                class=\"w-full p-2 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-gray-300 mb-1\">高速阈值 (km/h)</label>\r\n              <input \r\n                v-model.number=\"thresholds.speed_threshold_high\"\r\n                type=\"number\" \r\n                min=\"40\" \r\n                max=\"150\"\r\n                class=\"w-full p-2 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-gray-300 mb-1\">聚集密度</label>\r\n              <input \r\n                v-model.number=\"thresholds.cluster_density\"\r\n                type=\"number\" \r\n                min=\"10\" \r\n                max=\"200\"\r\n                class=\"w-full p-2 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 控制按钮 -->\r\n        <div class=\"space-y-2\">\r\n          <button \r\n            @click=\"startDetection\"\r\n            :disabled=\"isDetecting\"\r\n            class=\"w-full btn-tech flex items-center justify-center\"\r\n          >\r\n            <LoaderIcon v-if=\"isDetecting\" class=\"w-4 h-4 mr-2 animate-spin\" />\r\n            <PlayIcon v-else class=\"w-4 h-4 mr-2\" />\r\n            {{ isDetecting ? '检测中...' : '开始检测' }}\r\n          </button>\r\n          <button \r\n            @click=\"clearResults\"\r\n            class=\"w-full btn-tech-secondary flex items-center justify-center\"\r\n          >\r\n            <RefreshCwIcon class=\"w-4 h-4 mr-2\" />\r\n            清除结果\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 主要内容区域 -->\r\n      <div class=\"lg:col-span-3 space-y-6\">\r\n        <!-- 统计卡片 -->\r\n        <div class=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          <div class=\"bg-red-900/30 rounded-xl p-4 border border-red-500/30\">\r\n            <div class=\"flex items-center\">\r\n              <AlertTriangleIcon class=\"w-6 h-6 text-red-400 mr-3\" />\r\n              <div>\r\n                <div class=\"text-2xl font-bold text-white\">{{ statistics.by_severity?.high || 0 }}</div>\r\n                <div class=\"text-sm text-gray-300\">高危异常</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"bg-orange-900/30 rounded-xl p-4 border border-orange-500/30\">\r\n            <div class=\"flex items-center\">\r\n              <AlertCircleIcon class=\"w-6 h-6 text-orange-400 mr-3\" />\r\n              <div>\r\n                <div class=\"text-2xl font-bold text-white\">{{ statistics.by_severity?.medium || 0 }}</div>\r\n                <div class=\"text-sm text-gray-300\">中危异常</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"bg-yellow-900/30 rounded-xl p-4 border border-yellow-500/30\">\r\n            <div class=\"flex items-center\">\r\n              <InfoIcon class=\"w-6 h-6 text-yellow-400 mr-3\" />\r\n              <div>\r\n                <div class=\"text-2xl font-bold text-white\">{{ statistics.by_severity?.low || 0 }}</div>\r\n                <div class=\"text-sm text-gray-300\">低危异常</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"bg-blue-900/30 rounded-xl p-4 border border-blue-500/30\">\r\n            <div class=\"flex items-center\">\r\n              <BarChart3Icon class=\"w-6 h-6 text-blue-400 mr-3\" />\r\n              <div>\r\n                <div class=\"text-2xl font-bold text-white\">{{ Object.keys(statistics.by_type || {}).length }}</div>\r\n                <div class=\"text-sm text-gray-300\">异常类型</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 地图可视化 -->\r\n        <div class=\"bg-blue-900/30 rounded-xl border border-blue-500/30 overflow-hidden\">\r\n          <div class=\"p-4 border-b border-blue-500/30 flex items-center justify-between\">\r\n            <h3 class=\"text-xl font-semibold text-white flex items-center\">\r\n              <MapIcon class=\"w-6 h-6 mr-2\" />\r\n              异常事件地图\r\n            </h3>\r\n            <div class=\"flex items-center space-x-2\">\r\n              <label class=\"flex items-center text-sm text-gray-300\">\r\n                <input \r\n                  v-model=\"showHeatmap\" \r\n                  type=\"checkbox\" \r\n                  class=\"mr-2 rounded bg-blue-900/50 border-blue-500/50 text-blue-500\"\r\n                />\r\n                热力图模式\r\n              </label>\r\n              <select \r\n                v-model=\"selectedAnomalyTypeFilter\"\r\n                class=\"px-3 py-1 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\"\r\n                @change=\"filterAnomaliesByType\"\r\n              >\r\n                <option value=\"all\">全部类型</option>\r\n                <option v-for=\"type in anomalyTypes\" :key=\"type.type\" :value=\"type.type\">\r\n                  {{ type.name }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div class=\"relative\">\r\n            <div :id=\"mapContainerId\" class=\"w-full h-96\"></div>\r\n            <div v-if=\"!mapInitialized\" class=\"absolute inset-0 flex items-center justify-center bg-blue-900/50\">\r\n              <div class=\"text-white\">地图加载中...</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 异常事件列表 -->\r\n        <div class=\"bg-blue-900/30 rounded-xl border border-blue-500/30\">\r\n          <div class=\"p-4 border-b border-blue-500/30 flex items-center justify-between\">\r\n            <h3 class=\"text-xl font-semibold text-white flex items-center\">\r\n              <ListIcon class=\"w-6 h-6 mr-2\" />\r\n              异常事件列表\r\n              <span class=\"ml-2 px-2 py-1 bg-red-500/20 text-red-400 text-sm rounded\">\r\n                {{ filteredAnomalies.length }}\r\n              </span>\r\n            </h3>\r\n            <div class=\"flex items-center space-x-2\">\r\n              <select \r\n                v-model=\"sortBy\"\r\n                class=\"px-3 py-1 bg-blue-900/50 border border-blue-500/50 rounded text-white text-sm\"\r\n                @change=\"sortAnomalies\"\r\n              >\r\n                <option value=\"timestamp\">按时间排序</option>\r\n                <option value=\"severity\">按严重程度</option>\r\n                <option value=\"type\">按类型排序</option>\r\n              </select>\r\n              <button \r\n                @click=\"exportAnomalies\"\r\n                class=\"px-3 py-1 bg-green-600/50 hover:bg-green-600/70 border border-green-500/50 rounded text-white text-sm flex items-center\"\r\n              >\r\n                <DownloadIcon class=\"w-4 h-4 mr-1\" />\r\n                导出\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class=\"max-h-96 overflow-y-auto\">\r\n            <div v-if=\"filteredAnomalies.length === 0\" class=\"p-8 text-center text-gray-400\">\r\n              <ScanIcon class=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\r\n              <p>暂无异常事件</p>\r\n              <p class=\"text-sm mt-1\">点击\"开始检测\"来搜索异常事件</p>\r\n            </div>\r\n            <div v-else class=\"divide-y divide-blue-500/20\">\r\n              <div \r\n                v-for=\"anomaly in filteredAnomalies.slice(0, 50)\" \r\n                :key=\"anomaly.id\"\r\n                class=\"p-4 hover:bg-blue-800/30 cursor-pointer transition-colors\"\r\n                @click=\"selectAnomaly(anomaly)\"\r\n              >\r\n                <div class=\"flex items-start justify-between\">\r\n                  <div class=\"flex items-start\">\r\n                    <div :class=\"getSeverityIndicator(anomaly.severity)\" class=\"w-3 h-3 rounded-full mt-1 mr-3 flex-shrink-0\"></div>\r\n                    <div class=\"flex-1\">\r\n                      <div class=\"flex items-center space-x-2\">\r\n                        <h4 class=\"text-white font-medium\">{{ anomaly.name }}</h4>\r\n                        <span :class=\"getSeverityBadge(anomaly.severity)\" class=\"px-2 py-1 rounded text-xs font-medium\">\r\n                          {{ getSeverityText(anomaly.severity) }}\r\n                        </span>\r\n                        <span class=\"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded\">\r\n                          {{ getTypeText(anomaly.type) }}\r\n                        </span>\r\n                      </div>\r\n                      <p class=\"text-gray-300 text-sm mt-1\">{{ anomaly.description }}</p>\r\n                      <div class=\"flex items-center space-x-4 mt-2 text-xs text-gray-400\">\r\n                        <span class=\"flex items-center\">\r\n                          <ClockIcon class=\"w-3 h-3 mr-1\" />\r\n                          {{ formatTime(anomaly.timestamp) }}\r\n                        </span>\r\n                        <span class=\"flex items-center\" v-if=\"anomaly.vehicle_id\">\r\n                          <CarIcon class=\"w-3 h-3 mr-1\" />\r\n                          车辆: {{ anomaly.vehicle_id }}\r\n                        </span>\r\n                        <span class=\"flex items-center\">\r\n                          <MapPinIcon class=\"w-3 h-3 mr-1\" />\r\n                          {{ anomaly.latitude?.toFixed(4) }}, {{ anomaly.longitude?.toFixed(4) }}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <button \r\n                    @click.stop=\"locateOnMap(anomaly)\"\r\n                    class=\"px-2 py-1 bg-cyan-600/50 hover:bg-cyan-600/70 border border-cyan-500/50 rounded text-white text-xs flex items-center\"\r\n                  >\r\n                    <EyeIcon class=\"w-3 h-3 mr-1\" />\r\n                    定位\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 详情模态框 -->\r\n    <div v-if=\"selectedAnomaly\" class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\" @click=\"closeAnomalyDetail\">\r\n      <div class=\"bg-blue-900 rounded-xl border border-blue-500/50 max-w-2xl w-full m-4 max-h-[80vh] overflow-y-auto\" @click.stop>\r\n        <div class=\"p-6\">\r\n          <div class=\"flex items-center justify-between mb-4\">\r\n            <h3 class=\"text-xl font-bold text-white flex items-center\">\r\n              <AlertTriangleIcon class=\"w-6 h-6 mr-2 text-red-400\" />\r\n              异常事件详情\r\n            </h3>\r\n            <button @click=\"closeAnomalyDetail\" class=\"text-gray-400 hover:text-white\">\r\n              <XIcon class=\"w-6 h-6\" />\r\n            </button>\r\n          </div>\r\n          \r\n          <div class=\"space-y-4\">\r\n            <div class=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label class=\"block text-sm text-gray-300 mb-1\">异常类型</label>\r\n                <div class=\"text-white font-medium\">{{ selectedAnomaly.name }}</div>\r\n              </div>\r\n              <div>\r\n                <label class=\"block text-sm text-gray-300 mb-1\">严重程度</label>\r\n                <span :class=\"getSeverityBadge(selectedAnomaly.severity)\" class=\"px-3 py-1 rounded font-medium\">\r\n                  {{ getSeverityText(selectedAnomaly.severity) }}\r\n                </span>\r\n              </div>\r\n              <div>\r\n                <label class=\"block text-sm text-gray-300 mb-1\">发生时间</label>\r\n                <div class=\"text-white\">{{ formatTime(selectedAnomaly.timestamp) }}</div>\r\n              </div>\r\n              <div v-if=\"selectedAnomaly.vehicle_id\">\r\n                <label class=\"block text-sm text-gray-300 mb-1\">车辆ID</label>\r\n                <div class=\"text-white font-mono\">{{ selectedAnomaly.vehicle_id }}</div>\r\n              </div>\r\n              <div>\r\n                <label class=\"block text-sm text-gray-300 mb-1\">位置坐标</label>\r\n                <div class=\"text-white font-mono text-sm\">\r\n                  {{ selectedAnomaly.latitude?.toFixed(6) }}, {{ selectedAnomaly.longitude?.toFixed(6) }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <label class=\"block text-sm text-gray-300 mb-1\">详细描述</label>\r\n              <div class=\"text-white bg-blue-800/30 p-3 rounded\">{{ selectedAnomaly.description }}</div>\r\n            </div>\r\n            \r\n            <div v-if=\"selectedAnomaly.details\">\r\n              <label class=\"block text-sm text-gray-300 mb-2\">技术详情</label>\r\n              <div class=\"bg-blue-800/30 p-3 rounded\">\r\n                <pre class=\"text-sm text-gray-300 whitespace-pre-wrap\">{{ JSON.stringify(selectedAnomaly.details, null, 2) }}</pre>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"flex space-x-2 pt-4\">\r\n              <button \r\n                @click=\"locateOnMap(selectedAnomaly)\"\r\n                class=\"flex-1 btn-tech flex items-center justify-center\"\r\n              >\r\n                <MapPinIcon class=\"w-4 h-4 mr-2\" />\r\n                在地图上定位\r\n              </button>\r\n              <button \r\n                @click=\"exportSingleAnomaly(selectedAnomaly)\"\r\n                class=\"flex-1 btn-tech-secondary flex items-center justify-center\"\r\n              >\r\n                <DownloadIcon class=\"w-4 h-4 mr-2\" />\r\n                导出详情\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, onUnmounted, watch } from 'vue'\r\nimport { \r\n  AlertTriangleIcon, \r\n  SettingsIcon, \r\n  ClockIcon, \r\n  ScanIcon, \r\n  SlidersHorizontalIcon,\r\n  PlayIcon,\r\n  LoaderIcon,\r\n  RefreshCwIcon,\r\n  BarChart3Icon,\r\n  MapIcon,\r\n  ListIcon,\r\n  DownloadIcon,\r\n  EyeIcon,\r\n  XIcon,\r\n  MapPinIcon,\r\n  AlertCircleIcon,\r\n  InfoIcon,\r\n  CarIcon\r\n} from 'lucide-vue-next'\r\nimport { \r\n  detectAnomalies, \r\n  getRealtimeAnomalies, \r\n  getAnomalyTypes, \r\n  getAnomalyHeatmap \r\n} from '@/api/traffic'\r\n\r\n// 地图相关\r\nconst mapContainerId = 'anomaly-map-' + Date.now()\r\nlet map = null\r\nlet markers = []\r\nlet heatmapLayer = null\r\nconst mapInitialized = ref(false)\r\n\r\n// 基础状态\r\nconst isRealTimeMode = ref(false)\r\nconst isDetecting = ref(false)\r\nconst showHeatmap = ref(false)\r\nconst selectedAnomalyTypeFilter = ref('all')\r\nconst sortBy = ref('timestamp')\r\n\r\n// 时间限制\r\nconst minDate = \"2013-09-12T00:00\"\r\nconst maxDate = \"2013-09-18T23:59\"\r\n\r\n// 检测参数\r\nconst detectionParams = ref({\r\n  startTime: \"2013-09-13T08:00\",\r\n  endTime: \"2013-09-13T12:00\",\r\n  detectAll: true,\r\n  selectedTypes: []\r\n})\r\n\r\n// 阈值配置\r\nconst thresholds = ref({\r\n  long_stop_duration_minutes: 5,\r\n  speed_threshold_low: 5,\r\n  speed_threshold_high: 80,\r\n  cluster_density: 50\r\n})\r\n\r\n// 数据状态\r\nconst anomalyTypes = ref([])\r\nconst anomalies = ref([])\r\nconst statistics = ref({})\r\nconst selectedAnomaly = ref(null)\r\n\r\n// 计算属性\r\nconst filteredAnomalies = computed(() => {\r\n  if (selectedAnomalyTypeFilter.value === 'all') {\r\n    return anomalies.value\r\n  }\r\n  return anomalies.value.filter(anomaly => anomaly.type === selectedAnomalyTypeFilter.value)\r\n})\r\n\r\n// 实时监控定时器\r\nlet realtimeTimer = null\r\n\r\n// 方法\r\nasync function initMap() {\r\n  if (!window.AMap) {\r\n    await loadAMapAPI()\r\n  }\r\n  \r\n  map = new window.AMap.Map(mapContainerId, {\r\n    center: [117.120, 36.651],\r\n    zoom: 11,\r\n    mapStyle: 'amap://styles/dark'\r\n  })\r\n  \r\n  map.plugin(['AMap.ToolBar', 'AMap.Scale'], function() {\r\n    map.addControl(new window.AMap.ToolBar())\r\n    map.addControl(new window.AMap.Scale())\r\n  })\r\n  \r\n  mapInitialized.value = true\r\n}\r\n\r\nfunction loadAMapAPI() {\r\n  return new Promise((resolve, reject) => {\r\n    if (window.AMap) {\r\n      resolve()\r\n      return\r\n    }\r\n    \r\n    const script = document.createElement('script')\r\n    script.src = 'https://webapi.amap.com/maps?v=2.0&key=ac9b745946df9aee02cf0515319407df&callback=initAMap'\r\n    \r\n    window.initAMap = () => {\r\n      resolve()\r\n      delete window.initAMap\r\n    }\r\n    \r\n    script.onerror = reject\r\n    document.head.appendChild(script)\r\n  })\r\n}\r\n\r\nasync function loadAnomalyTypes() {\r\n  try {\r\n    const response = await getAnomalyTypes()\r\n    if (response.data.success) {\r\n      anomalyTypes.value = response.data.anomaly_types\r\n    }\r\n  } catch (error) {\r\n    console.error('加载异常类型失败:', error)\r\n  }\r\n}\r\n\r\nfunction toggleDetectAll() {\r\n  if (detectionParams.value.detectAll) {\r\n    detectionParams.value.selectedTypes = []\r\n  }\r\n}\r\n\r\nasync function startDetection() {\r\n  if (isDetecting.value) return\r\n  \r\n  isDetecting.value = true\r\n  \r\n  try {\r\n    if (isRealTimeMode.value) {\r\n      await detectRealtimeAnomalies()\r\n      startRealtimeMonitoring()\r\n    } else {\r\n      await detectHistoricalAnomalies()\r\n    }\r\n  } catch (error) {\r\n    console.error('异常检测失败:', error)\r\n    alert('异常检测失败，请检查参数后重试')\r\n  } finally {\r\n    isDetecting.value = false\r\n  }\r\n}\r\n\r\nasync function detectRealtimeAnomalies() {\r\n  const response = await getRealtimeAnomalies(3600, 100)\r\n  \r\n  if (response.data.success) {\r\n    anomalies.value = response.data.anomalies\r\n    updateStatistics()\r\n    displayAnomaliesOnMap()\r\n  }\r\n}\r\n\r\nasync function detectHistoricalAnomalies() {\r\n  // 转换时间为时间戳\r\n  const startTimestamp = new Date(detectionParams.value.startTime).getTime() / 1000\r\n  const endTimestamp = new Date(detectionParams.value.endTime).getTime() / 1000\r\n  \r\n  // 确定检测类型\r\n  let detectionTypes = 'all'\r\n  if (!detectionParams.value.detectAll && detectionParams.value.selectedTypes.length > 0) {\r\n    detectionTypes = detectionParams.value.selectedTypes.join(',')\r\n  }\r\n  \r\n  // 准备阈值参数\r\n  const thresholdParams = {\r\n    long_stop_duration: thresholds.value.long_stop_duration_minutes * 60,\r\n    speed_threshold_low: thresholds.value.speed_threshold_low,\r\n    speed_threshold_high: thresholds.value.speed_threshold_high,\r\n    cluster_density: thresholds.value.cluster_density\r\n  }\r\n  \r\n  const response = await detectAnomalies(startTimestamp, endTimestamp, detectionTypes, thresholdParams)\r\n  \r\n  if (response.data.success) {\r\n    anomalies.value = response.data.anomalies\r\n    statistics.value = response.data.statistics\r\n    displayAnomaliesOnMap()\r\n  } else {\r\n    alert(response.data.message || '检测失败')\r\n  }\r\n}\r\n\r\nfunction startRealtimeMonitoring() {\r\n  if (realtimeTimer) {\r\n    clearInterval(realtimeTimer)\r\n  }\r\n  \r\n  if (isRealTimeMode.value) {\r\n    realtimeTimer = setInterval(() => {\r\n      detectRealtimeAnomalies()\r\n    }, 30000) // 30秒刷新一次\r\n  }\r\n}\r\n\r\nfunction updateStatistics() {\r\n  const stats = {\r\n    total_count: anomalies.value.length,\r\n    by_type: {},\r\n    by_severity: { high: 0, medium: 0, low: 0 }\r\n  }\r\n  \r\n  anomalies.value.forEach(anomaly => {\r\n    // 按类型统计\r\n    const type = anomaly.type || 'unknown'\r\n    stats.by_type[type] = (stats.by_type[type] || 0) + 1\r\n    \r\n    // 按严重程度统计\r\n    const severity = anomaly.severity || 'low'\r\n    if (stats.by_severity[severity] !== undefined) {\r\n      stats.by_severity[severity]++\r\n    }\r\n  })\r\n  \r\n  statistics.value = stats\r\n}\r\n\r\nfunction displayAnomaliesOnMap() {\r\n  if (!map) return\r\n  \r\n  clearMapMarkers()\r\n  \r\n  if (showHeatmap.value) {\r\n    displayHeatmap()\r\n  } else {\r\n    displayMarkers()\r\n  }\r\n}\r\n\r\nfunction displayMarkers() {\r\n  const colorMap = {\r\n    'high': '#ff4444',\r\n    'medium': '#ffa726',\r\n    'low': '#ffeb3b'\r\n  }\r\n  \r\n  filteredAnomalies.value.forEach(anomaly => {\r\n    const color = colorMap[anomaly.severity] || '#666666'\r\n    \r\n    const marker = new window.AMap.Marker({\r\n      position: [anomaly.longitude, anomaly.latitude],\r\n      icon: new window.AMap.Icon({\r\n        size: new window.AMap.Size(24, 24),\r\n        image: `data:image/svg+xml;base64,${btoa(`\r\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"${color}\" stroke=\"#fff\" stroke-width=\"2\"/>\r\n            <path d=\"M12 8v4l3 3\" stroke=\"#fff\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n          </svg>\r\n        `)}`\r\n      }),\r\n      title: anomaly.name,\r\n      extData: anomaly\r\n    })\r\n    \r\n    marker.on('click', () => {\r\n      selectAnomaly(anomaly)\r\n    })\r\n    \r\n    map.add(marker)\r\n    markers.push(marker)\r\n  })\r\n  \r\n  // 自适应视野\r\n  if (markers.length > 0) {\r\n    map.setFitView(markers, false, [50, 50, 50, 50])\r\n  }\r\n}\r\n\r\nasync function displayHeatmap() {\r\n  if (!map || filteredAnomalies.value.length === 0) return\r\n  \r\n  try {\r\n    // 获取热力图数据\r\n    const startTimestamp = new Date(detectionParams.value.startTime).getTime() / 1000\r\n    const endTimestamp = new Date(detectionParams.value.endTime).getTime() / 1000\r\n    \r\n    const response = await getAnomalyHeatmap(\r\n      startTimestamp, \r\n      endTimestamp, \r\n      selectedAnomalyTypeFilter.value\r\n    )\r\n    \r\n    if (response.data.success && response.data.heatmap_points.length > 0) {\r\n      const heatmapData = response.data.heatmap_points.map(point => ({\r\n        lng: point.lng,\r\n        lat: point.lat,\r\n        count: point.intensity || point.count\r\n      }))\r\n      \r\n      // 移除旧的热力图\r\n      if (heatmapLayer) {\r\n        map.remove(heatmapLayer)\r\n      }\r\n      \r\n      // 创建新的热力图\r\n      map.plugin(['AMap.Heatmap'], () => {\r\n        heatmapLayer = new window.AMap.Heatmap(map, {\r\n          radius: 25,\r\n          opacity: [0, 0.8],\r\n          gradient: {\r\n            0.4: '#00ff00',\r\n            0.6: '#ffff00',\r\n            0.8: '#ff8800',\r\n            1.0: '#ff0000'\r\n          }\r\n        })\r\n        \r\n        heatmapLayer.setDataSet({\r\n          data: heatmapData,\r\n          max: Math.max(...heatmapData.map(d => d.count))\r\n        })\r\n      })\r\n    }\r\n  } catch (error) {\r\n    console.error('显示热力图失败:', error)\r\n  }\r\n}\r\n\r\nfunction clearMapMarkers() {\r\n  markers.forEach(marker => map.remove(marker))\r\n  markers = []\r\n  \r\n  if (heatmapLayer) {\r\n    map.remove(heatmapLayer)\r\n    heatmapLayer = null\r\n  }\r\n}\r\n\r\nfunction clearResults() {\r\n  anomalies.value = []\r\n  statistics.value = {}\r\n  selectedAnomaly.value = null\r\n  clearMapMarkers()\r\n  \r\n  if (realtimeTimer) {\r\n    clearInterval(realtimeTimer)\r\n    realtimeTimer = null\r\n  }\r\n}\r\n\r\nfunction filterAnomaliesByType() {\r\n  displayAnomaliesOnMap()\r\n}\r\n\r\nfunction sortAnomalies() {\r\n  switch (sortBy.value) {\r\n    case 'timestamp':\r\n      anomalies.value.sort((a, b) => b.timestamp - a.timestamp)\r\n      break\r\n    case 'severity':\r\n      const severityOrder = { high: 3, medium: 2, low: 1 }\r\n      anomalies.value.sort((a, b) => severityOrder[b.severity] - severityOrder[a.severity])\r\n      break\r\n    case 'type':\r\n      anomalies.value.sort((a, b) => a.type.localeCompare(b.type))\r\n      break\r\n  }\r\n}\r\n\r\nfunction selectAnomaly(anomaly) {\r\n  selectedAnomaly.value = anomaly\r\n}\r\n\r\nfunction closeAnomalyDetail() {\r\n  selectedAnomaly.value = null\r\n}\r\n\r\nfunction locateOnMap(anomaly) {\r\n  if (!map) return\r\n  \r\n  map.setCenter([anomaly.longitude, anomaly.latitude])\r\n  map.setZoom(15)\r\n  \r\n  // 高亮标记\r\n  const marker = markers.find(m => m.getExtData()?.id === anomaly.id)\r\n  if (marker) {\r\n    marker.setAnimation('AMAP_ANIMATION_BOUNCE')\r\n    setTimeout(() => {\r\n      marker.setAnimation('AMAP_ANIMATION_NONE')\r\n    }, 3000)\r\n  }\r\n  \r\n  closeAnomalyDetail()\r\n}\r\n\r\nfunction exportAnomalies() {\r\n  if (anomalies.value.length === 0) return\r\n  \r\n  const dataStr = JSON.stringify(anomalies.value, null, 2)\r\n  const dataBlob = new Blob([dataStr], { type: 'application/json' })\r\n  const url = URL.createObjectURL(dataBlob)\r\n  \r\n  const link = document.createElement('a')\r\n  link.href = url\r\n  link.download = `anomalies_${Date.now()}.json`\r\n  link.click()\r\n  \r\n  URL.revokeObjectURL(url)\r\n}\r\n\r\nfunction exportSingleAnomaly(anomaly) {\r\n  const dataStr = JSON.stringify(anomaly, null, 2)\r\n  const dataBlob = new Blob([dataStr], { type: 'application/json' })\r\n  const url = URL.createObjectURL(dataBlob)\r\n  \r\n  const link = document.createElement('a')\r\n  link.href = url\r\n  link.download = `anomaly_${anomaly.id}.json`\r\n  link.click()\r\n  \r\n  URL.revokeObjectURL(url)\r\n}\r\n\r\n// 辅助函数\r\nfunction getSeverityIndicator(severity) {\r\n  const classes = {\r\n    'high': 'bg-red-500',\r\n    'medium': 'bg-orange-500',\r\n    'low': 'bg-yellow-500'\r\n  }\r\n  return classes[severity] || 'bg-gray-500'\r\n}\r\n\r\nfunction getSeverityBadge(severity) {\r\n  const classes = {\r\n    'high': 'bg-red-500/20 text-red-400 border border-red-500/30',\r\n    'medium': 'bg-orange-500/20 text-orange-400 border border-orange-500/30',\r\n    'low': 'bg-yellow-500/20 text-yellow-400 border border-yellow-500/30'\r\n  }\r\n  return classes[severity] || 'bg-gray-500/20 text-gray-400 border border-gray-500/30'\r\n}\r\n\r\nfunction getSeverityText(severity) {\r\n  const texts = {\r\n    'high': '高危',\r\n    'medium': '中危',\r\n    'low': '低危'\r\n  }\r\n  return texts[severity] || '未知'\r\n}\r\n\r\nfunction getTypeText(type) {\r\n  const typeMap = anomalyTypes.value.reduce((map, t) => {\r\n    map[t.type] = t.name\r\n    return map\r\n  }, {})\r\n  return typeMap[type] || type\r\n}\r\n\r\nfunction formatTime(timestamp) {\r\n  return new Date(timestamp * 1000).toLocaleString('zh-CN')\r\n}\r\n\r\n// 监听模式变化\r\nwatch(isRealTimeMode, (newVal) => {\r\n  if (!newVal && realtimeTimer) {\r\n    clearInterval(realtimeTimer)\r\n    realtimeTimer = null\r\n  }\r\n})\r\n\r\nwatch(showHeatmap, () => {\r\n  displayAnomaliesOnMap()\r\n})\r\n\r\n// 生命周期\r\nonMounted(async () => {\r\n  await loadAnomalyTypes()\r\n  \r\n  setTimeout(() => {\r\n    initMap()\r\n  }, 500)\r\n})\r\n\r\nonUnmounted(() => {\r\n  if (realtimeTimer) {\r\n    clearInterval(realtimeTimer)\r\n  }\r\n  \r\n  if (map) {\r\n    map.destroy()\r\n  }\r\n})\r\n</script> \r\n\r\n<style scoped>\r\n.anomaly-detection-container {\r\n  padding: 20px;\r\n  min-height: 100vh;\r\n}\r\n\r\n.btn-tech {\r\n  padding: 8px 16px;\r\n  background: linear-gradient(135deg, #dc2626, #ef4444);\r\n  border: none;\r\n  border-radius: 6px;\r\n  color: white;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.btn-tech:hover:not(:disabled) {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);\r\n}\r\n\r\n.btn-tech:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n  transform: none;\r\n}\r\n\r\n.btn-tech-secondary {\r\n  padding: 8px 16px;\r\n  background: rgba(75, 85, 99, 0.8);\r\n  border: 1px solid rgba(156, 163, 175, 0.3);\r\n  border-radius: 6px;\r\n  color: white;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.btn-tech-secondary:hover {\r\n  background: rgba(107, 114, 128, 0.8);\r\n}\r\n\r\n.animate-spin {\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAA6B;;EAEjCA,KAAK,EAAC;AAAM;;EACVA,KAAK,EAAC;AAA6G;;EACjHA,KAAK,EAAC;AAAmC;;EACvCA,KAAK,EAAC;AAAmB;;EACvBA,KAAK,EAAC;AAAmC;;EAQ3CA,KAAK,EAAC;AAA6B;;EACjCA,KAAK,EAAC;AAAa;;EACjBA,KAAK,EAAC;AAAiC;;EAGzCA,KAAK,EAAC;AAAa;;EACjBA,KAAK,EAAC;AAAoC;;EAG5CA,KAAK,EAAC;AAAa;;EACjBA,KAAK,EAAC;AAAmC;;EASnDA,KAAK,EAAC;AAA4C;;EAEhDA,KAAK,EAAC;AAAyB;;EAE7BA,KAAK,EAAC;AAAyD;;EAC9DA,KAAK,EAAC;AAAyD;;EAI9DA,KAAK,EAAC;AAAW;;EACbA,KAAK,EAAC;AAAmB;;;EAY/BA,KAAK,EAAC;;;EACLA,KAAK,EAAC;AAAyD;;EAI9DA,KAAK,EAAC;AAAW;;EAyBnBA,KAAK,EAAC;AAAyD;;EAC9DA,KAAK,EAAC;AAAyD;;EAI9DA,KAAK,EAAC;AAAW;;EACbA,KAAK,EAAC;AAAmB;;EAUvBA,KAAK,EAAC;AAAmB;;;EAQxBA,KAAK,EAAC;AAAuB;;EAOtCA,KAAK,EAAC;AAAyD;;EAC9DA,KAAK,EAAC;AAAyD;;EAI9DA,KAAK,EAAC;AAAmB;;EA6C3BA,KAAK,EAAC;AAAW;;;EAqBnBA,KAAK,EAAC;AAAyB;;EAE7BA,KAAK,EAAC;AAAuC;;EAC3CA,KAAK,EAAC;AAAuD;;EAC3DA,KAAK,EAAC;AAAmB;;EAGrBA,KAAK,EAAC;AAA+B;;EAK3CA,KAAK,EAAC;AAA6D;;EACjEA,KAAK,EAAC;AAAmB;;EAGrBA,KAAK,EAAC;AAA+B;;EAK3CA,KAAK,EAAC;AAA6D;;EACjEA,KAAK,EAAC;AAAmB;;EAGrBA,KAAK,EAAC;AAA+B;;EAK3CA,KAAK,EAAC;AAAyD;;EAC7DA,KAAK,EAAC;AAAmB;;EAGrBA,KAAK,EAAC;AAA+B;;EAQ7CA,KAAK,EAAC;AAAqE;;EACzEA,KAAK,EAAC;AAAmE;;EACxEA,KAAK,EAAC;AAAoD;;EAIzDA,KAAK,EAAC;AAA6B;;EAC/BA,KAAK,EAAC;AAAyC;;;EAoBrDA,KAAK,EAAC;AAAU;;;EAESA,KAAK,EAAC;;;EAOjCA,KAAK,EAAC;AAAqD;;EACzDA,KAAK,EAAC;AAAmE;;EACxEA,KAAK,EAAC;AAAoD;;EAGtDA,KAAK,EAAC;AAA2D;;EAIpEA,KAAK,EAAC;AAA6B;;EAmBrCA,KAAK,EAAC;AAA0B;;;EACQA,KAAK,EAAC;;;;EAKrCA,KAAK,EAAC;;;;EAOTA,KAAK,EAAC;AAAkC;;EACtCA,KAAK,EAAC;AAAkB;;EAEtBA,KAAK,EAAC;AAAQ;;EACZA,KAAK,EAAC;AAA6B;;EAClCA,KAAK,EAAC;AAAwB;;EAI5BA,KAAK,EAAC;AAAwD;;EAInEA,KAAK,EAAC;AAA4B;;EAChCA,KAAK,EAAC;AAAwD;;EAC3DA,KAAK,EAAC;AAAmB;;;EAIzBA,KAAK,EAAC;;;EAINA,KAAK,EAAC;AAAmB;;;EAyB1CA,KAAK,EAAC;AAAK;;EACTA,KAAK,EAAC;AAAwC;;EAC7CA,KAAK,EAAC;AAAgD;;EASvDA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAwB;;EAG1BA,KAAK,EAAC;AAAwB;;EAU9BA,KAAK,EAAC;AAAY;;;;;EAIlBA,KAAK,EAAC;AAAsB;;EAI5BA,KAAK,EAAC;AAA8B;;EAQtCA,KAAK,EAAC;AAAuC;;;;;EAK7CA,KAAK,EAAC;AAA4B;;EAChCA,KAAK,EAAC;AAA2C;;EAIrDA,KAAK,EAAC;AAAqB;;uBArZ1CC,mBAAA,CAyaM,OAzaNC,UAyaM,GAxaJC,mBAAA,aAAgB,EAChBC,mBAAA,CA4BM,OA5BNC,UA4BM,GA3BJD,mBAAA,CA0BM,OA1BNE,UA0BM,GAzBJF,mBAAA,CAwBM,OAxBNG,UAwBM,GAvBJH,mBAAA,CAQM,OARNI,UAQM,GAPJJ,mBAAA,CAEM,OAFNK,UAEM,GADJC,YAAA,CAAkDC,MAAA;IAA/BX,KAAK,EAAC;EAAsB,G,+BAEjDI,mBAAA,CAGM,cAFJA,mBAAA,CAA8D;IAA1DJ,KAAK,EAAC;EAAoC,GAAC,YAAU,GACzDI,mBAAA,CAAmD;IAAhDJ,KAAK,EAAC;EAAe,GAAC,wBAAsB,E,uBAGnDI,mBAAA,CAaM,OAbNQ,UAaM,GAZJR,mBAAA,CAGM,OAHNS,UAGM,GAFJT,mBAAA,CAAoF,OAApFU,UAAoF,EAAAC,gBAAA,CAApCJ,MAAA,CAAAK,UAAU,CAACC,WAAW,uB,4BACtEb,mBAAA,CAA6C;IAAxCJ,KAAK,EAAC;EAAuB,GAAC,MAAI,oB,GAEzCI,mBAAA,CAGM,OAHNc,WAGM,GAFJd,mBAAA,CAA6F,OAA7Fe,WAA6F,EAAAJ,gBAAA,CAA1CJ,MAAA,CAAAK,UAAU,CAACI,WAAW,EAAEC,IAAI,uB,4BAC/EjB,mBAAA,CAA6C;IAAxCJ,KAAK,EAAC;EAAuB,GAAC,MAAI,oB,GAEzCI,mBAAA,CAGM,OAHNkB,WAGM,GAFJlB,mBAAA,CAAuF,OAAvFmB,WAAuF,EAAAR,gBAAA,CAArCJ,MAAA,CAAAa,cAAc,gC,4BAChEpB,mBAAA,CAA6C;IAAxCJ,KAAK,EAAC;EAAuB,GAAC,MAAI,oB,WAOjDG,mBAAA,UAAa,EACbC,mBAAA,CA4TM,OA5TNqB,WA4TM,GA3TJtB,mBAAA,UAAa,EACbC,mBAAA,CAqJM,OArJNsB,WAqJM,GApJJvB,mBAAA,UAAa,EACbC,mBAAA,CAeM,OAfNuB,WAeM,GAdJvB,mBAAA,CAGK,MAHLwB,WAGK,GAFHlB,YAAA,CAAqCC,MAAA;IAAvBX,KAAK,EAAC;EAAc,I,6CAAG,QAEvC,G,GACAI,mBAAA,CASM,OATNyB,WASM,GARJzB,mBAAA,CAOQ,SAPR0B,WAOQ,G,gBANN1B,mBAAA,CAIE;+DAHSO,MAAA,CAAAa,cAAc,GAAAO,MAAA;IACvBC,IAAI,EAAC,UAAU;IACfhC,KAAK,EAAC;qDAFGW,MAAA,CAAAa,cAAc,E,+BAIzBpB,mBAAA,CAAsC;IAAhCJ,KAAK,EAAC;EAAY,GAAC,QAAM,oB,OAKrCG,mBAAA,UAAa,E,CAC+DQ,MAAA,CAAAa,cAAc,I,cAA1FvB,mBAAA,CA2BM,OA3BNgC,WA2BM,GA1BJ7B,mBAAA,CAGK,MAHL8B,WAGK,GAFHxB,YAAA,CAAkCC,MAAA;IAAvBX,KAAK,EAAC;EAAc,I,6CAAG,QAEpC,G,GACAI,mBAAA,CAqBM,OArBN+B,WAqBM,GApBJ/B,mBAAA,CASM,c,4BARJA,mBAAA,CAA4D;IAArDJ,KAAK,EAAC;EAAkC,GAAC,MAAI,qB,gBACpDI,mBAAA,CAME;+DALSO,MAAA,CAAAyB,eAAe,CAACC,SAAS,GAAAN,MAAA;IAClCC,IAAI,EAAC,gBAAgB;IACrBhC,KAAK,EAAC,gFAAgF;IACrFsC,GAAG,EAAE3B,MAAA,CAAA4B,OAAO;IACZC,GAAG,EAAE7B,MAAA,CAAA8B;iDAJG9B,MAAA,CAAAyB,eAAe,CAACC,SAAS,E,KAOtCjC,mBAAA,CASM,c,4BARJA,mBAAA,CAA4D;IAArDJ,KAAK,EAAC;EAAkC,GAAC,MAAI,qB,gBACpDI,mBAAA,CAME;+DALSO,MAAA,CAAAyB,eAAe,CAACM,OAAO,GAAAX,MAAA;IAChCC,IAAI,EAAC,gBAAgB;IACrBhC,KAAK,EAAC,gFAAgF;IACrFsC,GAAG,EAAE3B,MAAA,CAAA4B,OAAO;IACZC,GAAG,EAAE7B,MAAA,CAAA8B;iDAJG9B,MAAA,CAAAyB,eAAe,CAACM,OAAO,E,8CAUxCvC,mBAAA,UAAa,EACbC,mBAAA,CA4BM,OA5BNuC,WA4BM,GA3BJvC,mBAAA,CAGK,MAHLwC,WAGK,GAFHlC,YAAA,CAAiCC,MAAA;IAAvBX,KAAK,EAAC;EAAc,I,6CAAG,QAEnC,G,GACAI,mBAAA,CAsBM,OAtBNyC,WAsBM,GArBJzC,mBAAA,CAQQ,SARR0C,WAQQ,G,gBAPN1C,mBAAA,CAKE;+DAJSO,MAAA,CAAAyB,eAAe,CAACW,SAAS,GAAAhB,MAAA;IAClCC,IAAI,EAAC,UAAU;IACfhC,KAAK,EAAC,8DAA8D;IACnEgD,QAAM,EAAErC,MAAA,CAAAsC;qEAHAtC,MAAA,CAAAyB,eAAe,CAACW,SAAS,E,+BAKpC3C,mBAAA,CAAgD;IAA1CJ,KAAK,EAAC;EAAwB,GAAC,MAAI,oB,sBAE3CC,mBAAA,CAWMiD,SAAA,QAAAC,WAAA,CAXcxC,MAAA,CAAAyC,YAAY,EAApBpB,IAAI;yBAAhB/B,mBAAA,CAWM;MAX6BoD,GAAG,EAAErB,IAAI,CAACA,IAAI;MAAEhC,KAAK,EAAC;QACvDI,mBAAA,CASQ,SATRkD,WASQ,G,gBARNlD,mBAAA,CAME;iEALSO,MAAA,CAAAyB,eAAe,CAACmB,aAAa,GAAAxB,MAAA;MACrCyB,KAAK,EAAExB,IAAI,CAACA,IAAI;MACjBA,IAAI,EAAC,UAAU;MACfhC,KAAK,EAAC,8DAA8D;MACnEyD,QAAQ,EAAE9C,MAAA,CAAAyB,eAAe,CAACW;6DAJlBpC,MAAA,CAAAyB,eAAe,CAACmB,aAAa,E,GAMxCnD,mBAAA,CAA0D,QAA1DsD,WAA0D,EAAA3C,gBAAA,CAAnBiB,IAAI,CAAC2B,IAAI,iB;sCAMxDxD,mBAAA,UAAa,EACbC,mBAAA,CA+CM,OA/CNwD,WA+CM,GA9CJxD,mBAAA,CAGK,MAHLyD,WAGK,GAFHnD,YAAA,CAA8CC,MAAA;IAAvBX,KAAK,EAAC;EAAc,I,6CAAG,QAEhD,G,GACAI,mBAAA,CAyCM,OAzCN0D,WAyCM,GAxCJ1D,mBAAA,CASM,c,4BARJA,mBAAA,CAAyD;IAAlDJ,KAAK,EAAC;EAA0B,GAAC,WAAS,qB,gBACjDI,mBAAA,CAME;+DALgBO,MAAA,CAAAoD,UAAU,CAACC,0BAA0B,GAAAjC,MAAA;IACrDC,IAAI,EAAC,QAAQ;IACbM,GAAG,EAAC,GAAG;IACPE,GAAG,EAAC,IAAI;IACRxC,KAAK,EAAC;iDAJUW,MAAA,CAAAoD,UAAU,CAACC,0BAA0B,E;IAA7CC,MAAM,EAAd;EAAsD,E,MAO1D7D,mBAAA,CASM,c,4BARJA,mBAAA,CAA2D;IAApDJ,KAAK,EAAC;EAA0B,GAAC,aAAW,qB,gBACnDI,mBAAA,CAME;+DALgBO,MAAA,CAAAoD,UAAU,CAACG,mBAAmB,GAAAnC,MAAA;IAC9CC,IAAI,EAAC,QAAQ;IACbM,GAAG,EAAC,GAAG;IACPE,GAAG,EAAC,IAAI;IACRxC,KAAK,EAAC;iDAJUW,MAAA,CAAAoD,UAAU,CAACG,mBAAmB,E;IAAtCD,MAAM,EAAd;EAA+C,E,MAOnD7D,mBAAA,CASM,c,4BARJA,mBAAA,CAA2D;IAApDJ,KAAK,EAAC;EAA0B,GAAC,aAAW,qB,gBACnDI,mBAAA,CAME;+DALgBO,MAAA,CAAAoD,UAAU,CAACI,oBAAoB,GAAApC,MAAA;IAC/CC,IAAI,EAAC,QAAQ;IACbM,GAAG,EAAC,IAAI;IACRE,GAAG,EAAC,KAAK;IACTxC,KAAK,EAAC;iDAJUW,MAAA,CAAAoD,UAAU,CAACI,oBAAoB,E;IAAvCF,MAAM,EAAd;EAAgD,E,MAOpD7D,mBAAA,CASM,c,4BARJA,mBAAA,CAAoD;IAA7CJ,KAAK,EAAC;EAA0B,GAAC,MAAI,qB,gBAC5CI,mBAAA,CAME;+DALgBO,MAAA,CAAAoD,UAAU,CAACK,eAAe,GAAArC,MAAA;IAC1CC,IAAI,EAAC,QAAQ;IACbM,GAAG,EAAC,IAAI;IACRE,GAAG,EAAC,KAAK;IACTxC,KAAK,EAAC;iDAJUW,MAAA,CAAAoD,UAAU,CAACK,eAAe,E;IAAlCH,MAAM,EAAd;EAA2C,E,UAUnD9D,mBAAA,UAAa,EACbC,mBAAA,CAiBM,OAjBNiE,WAiBM,GAhBJjE,mBAAA,CAQS;IAPNkE,OAAK,EAAE3D,MAAA,CAAA4D,cAAc;IACrBd,QAAQ,EAAE9C,MAAA,CAAA6D,WAAW;IACtBxE,KAAK,EAAC;MAEYW,MAAA,CAAA6D,WAAW,I,cAA7BC,YAAA,CAAmE9D,MAAA;;IAApCX,KAAK,EAAC;uBACrCyE,YAAA,CAAwC9D,MAAA;;IAAvBX,KAAK,EAAC;wBAAiB,GACxC,GAAAe,gBAAA,CAAGJ,MAAA,CAAA6D,WAAW,qC,+BAEhBpE,mBAAA,CAMS;IALNkE,OAAK,EAAE3D,MAAA,CAAA+D,YAAY;IACpB1E,KAAK,EAAC;MAENU,YAAA,CAAsCC,MAAA;IAAvBX,KAAK,EAAC;EAAc,I,6CAAG,QAExC,G,OAIJG,mBAAA,YAAe,EACfC,mBAAA,CAiKM,OAjKNuE,WAiKM,GAhKJxE,mBAAA,UAAa,EACbC,mBAAA,CAqCM,OArCNwE,WAqCM,GApCJxE,mBAAA,CAQM,OARNyE,WAQM,GAPJzE,mBAAA,CAMM,OANN0E,WAMM,GALJpE,YAAA,CAAuDC,MAAA;IAApCX,KAAK,EAAC;EAA2B,IACpDI,mBAAA,CAGM,cAFJA,mBAAA,CAAwF,OAAxF2E,WAAwF,EAAAhE,gBAAA,CAA1CJ,MAAA,CAAAK,UAAU,CAACI,WAAW,EAAEC,IAAI,uB,4BAC1EjB,mBAAA,CAA6C;IAAxCJ,KAAK,EAAC;EAAuB,GAAC,MAAI,oB,OAI7CI,mBAAA,CAQM,OARN4E,WAQM,GAPJ5E,mBAAA,CAMM,OANN6E,WAMM,GALJvE,YAAA,CAAwDC,MAAA;IAAvCX,KAAK,EAAC;EAA8B,IACrDI,mBAAA,CAGM,cAFJA,mBAAA,CAA0F,OAA1F8E,WAA0F,EAAAnE,gBAAA,CAA5CJ,MAAA,CAAAK,UAAU,CAACI,WAAW,EAAE+D,MAAM,uB,4BAC5E/E,mBAAA,CAA6C;IAAxCJ,KAAK,EAAC;EAAuB,GAAC,MAAI,oB,OAI7CI,mBAAA,CAQM,OARNgF,WAQM,GAPJhF,mBAAA,CAMM,OANNiF,WAMM,GALJ3E,YAAA,CAAiDC,MAAA;IAAvCX,KAAK,EAAC;EAA8B,IAC9CI,mBAAA,CAGM,cAFJA,mBAAA,CAAuF,OAAvFkF,WAAuF,EAAAvE,gBAAA,CAAzCJ,MAAA,CAAAK,UAAU,CAACI,WAAW,EAAEmE,GAAG,uB,4BACzEnF,mBAAA,CAA6C;IAAxCJ,KAAK,EAAC;EAAuB,GAAC,MAAI,oB,OAI7CI,mBAAA,CAQM,OARNoF,WAQM,GAPJpF,mBAAA,CAMM,OANNqF,WAMM,GALJ/E,YAAA,CAAoDC,MAAA;IAArCX,KAAK,EAAC;EAA4B,IACjDI,mBAAA,CAGM,cAFJA,mBAAA,CAAmG,OAAnGsF,WAAmG,EAAA3E,gBAAA,CAArD4E,MAAM,CAACC,IAAI,CAACjF,MAAA,CAAAK,UAAU,CAAC6E,OAAO,QAAQC,MAAM,kB,4BAC1F1F,mBAAA,CAA6C;IAAxCJ,KAAK,EAAC;EAAuB,GAAC,MAAI,oB,SAM/CG,mBAAA,WAAc,EACdC,mBAAA,CAiCM,OAjCN2F,WAiCM,GAhCJ3F,mBAAA,CAyBM,OAzBN4F,WAyBM,GAxBJ5F,mBAAA,CAGK,MAHL6F,WAGK,GAFHvF,YAAA,CAAgCC,MAAA;IAAvBX,KAAK,EAAC;EAAc,I,6CAAG,UAElC,G,GACAI,mBAAA,CAmBM,OAnBN8F,WAmBM,GAlBJ9F,mBAAA,CAOQ,SAPR+F,WAOQ,G,gBANN/F,mBAAA,CAIE;+DAHSO,MAAA,CAAAyF,WAAW,GAAArE,MAAA;IACpBC,IAAI,EAAC,UAAU;IACfhC,KAAK,EAAC;qDAFGW,MAAA,CAAAyF,WAAW,E,gDAGpB,SAEJ,G,mBACAhG,mBAAA,CASS;iEAREO,MAAA,CAAA0F,yBAAyB,GAAAtE,MAAA;IAClC/B,KAAK,EAAC,+EAA+E;IACpFgD,QAAM,EAAErC,MAAA,CAAA2F;kCAETlG,mBAAA,CAAiC;IAAzBoD,KAAK,EAAC;EAAK,GAAC,MAAI,sB,kBACxBvD,mBAAA,CAESiD,SAAA,QAAAC,WAAA,CAFcxC,MAAA,CAAAyC,YAAY,EAApBpB,IAAI;yBAAnB/B,mBAAA,CAES;MAF6BoD,GAAG,EAAErB,IAAI,CAACA,IAAI;MAAGwB,KAAK,EAAExB,IAAI,CAACA;wBAC9DA,IAAI,CAAC2B,IAAI,wBAAA4C,WAAA;2FANL5F,MAAA,CAAA0F,yBAAyB,E,OAWxCjG,mBAAA,CAKM,OALNoG,WAKM,GAJJpG,mBAAA,CAAoD;IAA9CqG,EAAE,EAAE9F,MAAA,CAAA+F,cAAc;IAAE1G,KAAK,EAAC;OACpBW,MAAA,CAAAgG,cAAc,I,cAA1B1G,mBAAA,CAEM,OAFN2G,WAEM,EAAAC,MAAA,SAAAA,MAAA,QADJzG,mBAAA,CAAsC;IAAjCJ,KAAK,EAAC;EAAY,GAAC,UAAQ,mB,6CAKtCG,mBAAA,YAAe,EACfC,mBAAA,CAkFM,OAlFN0G,WAkFM,GAjFJ1G,mBAAA,CA0BM,OA1BN2G,WA0BM,GAzBJ3G,mBAAA,CAMK,MANL4G,WAMK,GALHtG,YAAA,CAAiCC,MAAA;IAAvBX,KAAK,EAAC;EAAc,I,6CAAG,UAEjC,IAAAI,mBAAA,CAEO,QAFP6G,WAEO,EAAAlG,gBAAA,CADFJ,MAAA,CAAAuG,iBAAiB,CAACpB,MAAM,iB,GAG/B1F,mBAAA,CAiBM,OAjBN+G,WAiBM,G,gBAhBJ/G,mBAAA,CAQS;iEAPEO,MAAA,CAAAyG,MAAM,GAAArF,MAAA;IACf/B,KAAK,EAAC,+EAA+E;IACpFgD,QAAM,EAAErC,MAAA,CAAA0G;kCAETjH,mBAAA,CAAwC;IAAhCoD,KAAK,EAAC;EAAW,GAAC,OAAK,oBAC/BpD,mBAAA,CAAuC;IAA/BoD,KAAK,EAAC;EAAU,GAAC,OAAK,oBAC9BpD,mBAAA,CAAmC;IAA3BoD,KAAK,EAAC;EAAM,GAAC,OAAK,mB,2DANjB7C,MAAA,CAAAyG,MAAM,E,GAQjBhH,mBAAA,CAMS;IALNkE,OAAK,EAAE3D,MAAA,CAAA2G,eAAe;IACvBtH,KAAK,EAAC;MAENU,YAAA,CAAqCC,MAAA;IAAvBX,KAAK,EAAC;EAAc,I,6CAAG,MAEvC,G,OAGJI,mBAAA,CAqDM,OArDNmH,WAqDM,GApDO5G,MAAA,CAAAuG,iBAAiB,CAACpB,MAAM,U,cAAnC7F,mBAAA,CAIM,OAJNuH,WAIM,GAHJ9G,YAAA,CAAsDC,MAAA;IAA5CX,KAAK,EAAC;EAAmC,I,4BACnDI,mBAAA,CAAa,WAAV,QAAM,qB,4BACTA,mBAAA,CAA2C;IAAxCJ,KAAK,EAAC;EAAc,GAAC,mBAAe,oB,oBAEzCC,mBAAA,CA8CM,OA9CNwH,WA8CM,I,kBA7CJxH,mBAAA,CA4CMiD,SAAA,QAAAC,WAAA,CA3CcxC,MAAA,CAAAuG,iBAAiB,CAACQ,KAAK,SAAlCC,OAAO;yBADhB1H,mBAAA,CA4CM;MA1CHoD,GAAG,EAAEsE,OAAO,CAAClB,EAAE;MAChBzG,KAAK,EAAC,2DAA2D;MAChEsE,OAAK,EAAAvC,MAAA,IAAEpB,MAAA,CAAAiH,aAAa,CAACD,OAAO;QAE7BvH,mBAAA,CAqCM,OArCNyH,WAqCM,GApCJzH,mBAAA,CA4BM,OA5BN0H,WA4BM,GA3BJ1H,mBAAA,CAAgH;MAA1GJ,KAAK,EAAA+H,eAAA,EAAEpH,MAAA,CAAAqH,oBAAoB,CAACL,OAAO,CAACM,QAAQ,GAAS,8CAA8C;6BACzG7H,mBAAA,CAyBM,OAzBN8H,WAyBM,GAxBJ9H,mBAAA,CAQM,OARN+H,WAQM,GAPJ/H,mBAAA,CAA0D,MAA1DgI,WAA0D,EAAArH,gBAAA,CAApB4G,OAAO,CAAChE,IAAI,kBAClDvD,mBAAA,CAEO;MAFAJ,KAAK,EAAA+H,eAAA,EAAEpH,MAAA,CAAA0H,gBAAgB,CAACV,OAAO,CAACM,QAAQ,GAAS,uCAAuC;wBAC1FtH,MAAA,CAAA2H,eAAe,CAACX,OAAO,CAACM,QAAQ,0BAErC7H,mBAAA,CAEO,QAFPmI,WAEO,EAAAxH,gBAAA,CADFJ,MAAA,CAAA6H,WAAW,CAACb,OAAO,CAAC3F,IAAI,kB,GAG/B5B,mBAAA,CAAmE,KAAnEqI,WAAmE,EAAA1H,gBAAA,CAA1B4G,OAAO,CAACe,WAAW,kBAC5DtI,mBAAA,CAaM,OAbNuI,WAaM,GAZJvI,mBAAA,CAGO,QAHPwI,WAGO,GAFLlI,YAAA,CAAkCC,MAAA;MAAvBX,KAAK,EAAC;IAAc,I,iBAAG,GAClC,GAAAe,gBAAA,CAAGJ,MAAA,CAAAkI,UAAU,CAAClB,OAAO,CAACmB,SAAS,kB,GAEKnB,OAAO,CAACoB,UAAU,I,cAAxD9I,mBAAA,CAGO,QAHP+I,WAGO,GAFLtI,YAAA,CAAgCC,MAAA;MAAvBX,KAAK,EAAC;IAAc,I,iBAAG,OAC5B,GAAAe,gBAAA,CAAG4G,OAAO,CAACoB,UAAU,iB,wCAE3B3I,mBAAA,CAGO,QAHP6I,WAGO,GAFLvI,YAAA,CAAmCC,MAAA;MAAvBX,KAAK,EAAC;IAAc,I,iBAAG,GACnC,GAAAe,gBAAA,CAAG4G,OAAO,CAACuB,QAAQ,EAAEC,OAAO,OAAM,IAAE,GAAApI,gBAAA,CAAG4G,OAAO,CAACyB,SAAS,EAAED,OAAO,oB,SAKzE/I,mBAAA,CAMS;MALNkE,OAAK,EAAA+E,cAAA,CAAAtH,MAAA,IAAOpB,MAAA,CAAA2I,WAAW,CAAC3B,OAAO;MAChC3H,KAAK,EAAC;QAENU,YAAA,CAAgCC,MAAA;MAAvBX,KAAK,EAAC;IAAc,I,6CAAG,MAElC,G;6CASdG,mBAAA,WAAc,EACHQ,MAAA,CAAA4I,eAAe,I,cAA1BtJ,mBAAA,CAwEM;;IAxEsBD,KAAK,EAAC,iEAAiE;IAAEsE,OAAK,EAAE3D,MAAA,CAAA6I;MAC1GpJ,mBAAA,CAsEM;IAtEDJ,KAAK,EAAC,oGAAoG;IAAEsE,OAAK,EAAAuC,MAAA,SAAAA,MAAA,OAAAwC,cAAA,CAAN,QAAW;MACzHjJ,mBAAA,CAoEM,OApENqJ,WAoEM,GAnEJrJ,mBAAA,CAQM,OARNsJ,WAQM,GAPJtJ,mBAAA,CAGK,MAHLuJ,WAGK,GAFHjJ,YAAA,CAAuDC,MAAA;IAApCX,KAAK,EAAC;EAA2B,I,6CAAG,UAEzD,G,GACAI,mBAAA,CAES;IAFAkE,OAAK,EAAE3D,MAAA,CAAA6I,kBAAkB;IAAExJ,KAAK,EAAC;MACxCU,YAAA,CAAyBC,MAAA;IAAlBX,KAAK,EAAC;EAAS,G,KAI1BI,mBAAA,CAwDM,OAxDNwJ,WAwDM,GAvDJxJ,mBAAA,CAyBM,OAzBNyJ,WAyBM,GAxBJzJ,mBAAA,CAGM,c,4BAFJA,mBAAA,CAA4D;IAArDJ,KAAK,EAAC;EAAkC,GAAC,MAAI,qBACpDI,mBAAA,CAAoE,OAApE0J,WAAoE,EAAA/I,gBAAA,CAA7BJ,MAAA,CAAA4I,eAAe,CAAC5F,IAAI,iB,GAE7DvD,mBAAA,CAKM,c,4BAJJA,mBAAA,CAA4D;IAArDJ,KAAK,EAAC;EAAkC,GAAC,MAAI,qBACpDI,mBAAA,CAEO;IAFAJ,KAAK,EAAA+H,eAAA,EAAEpH,MAAA,CAAA0H,gBAAgB,CAAC1H,MAAA,CAAA4I,eAAe,CAACtB,QAAQ,GAAS,+BAA+B;sBAC1FtH,MAAA,CAAA2H,eAAe,CAAC3H,MAAA,CAAA4I,eAAe,CAACtB,QAAQ,yB,GAG/C7H,mBAAA,CAGM,c,4BAFJA,mBAAA,CAA4D;IAArDJ,KAAK,EAAC;EAAkC,GAAC,MAAI,qBACpDI,mBAAA,CAAyE,OAAzE2J,WAAyE,EAAAhJ,gBAAA,CAA9CJ,MAAA,CAAAkI,UAAU,CAAClI,MAAA,CAAA4I,eAAe,CAACT,SAAS,kB,GAEtDnI,MAAA,CAAA4I,eAAe,CAACR,UAAU,I,cAArC9I,mBAAA,CAGM,OAAA+J,WAAA,G,4BAFJ5J,mBAAA,CAA4D;IAArDJ,KAAK,EAAC;EAAkC,GAAC,MAAI,qBACpDI,mBAAA,CAAwE,OAAxE6J,WAAwE,EAAAlJ,gBAAA,CAAnCJ,MAAA,CAAA4I,eAAe,CAACR,UAAU,iB,wCAEjE3I,mBAAA,CAKM,c,4BAJJA,mBAAA,CAA4D;IAArDJ,KAAK,EAAC;EAAkC,GAAC,MAAI,qBACpDI,mBAAA,CAEM,OAFN8J,WAEM,EAAAnJ,gBAAA,CADDJ,MAAA,CAAA4I,eAAe,CAACL,QAAQ,EAAEC,OAAO,OAAM,IAAE,GAAApI,gBAAA,CAAGJ,MAAA,CAAA4I,eAAe,CAACH,SAAS,EAAED,OAAO,oB,KAKvF/I,mBAAA,CAGM,c,4BAFJA,mBAAA,CAA4D;IAArDJ,KAAK,EAAC;EAAkC,GAAC,MAAI,qBACpDI,mBAAA,CAA0F,OAA1F+J,WAA0F,EAAApJ,gBAAA,CAApCJ,MAAA,CAAA4I,eAAe,CAACb,WAAW,iB,GAGxE/H,MAAA,CAAA4I,eAAe,CAACa,OAAO,I,cAAlCnK,mBAAA,CAKM,OAAAoK,WAAA,G,4BAJJjK,mBAAA,CAA4D;IAArDJ,KAAK,EAAC;EAAkC,GAAC,MAAI,qBACpDI,mBAAA,CAEM,OAFNkK,WAEM,GADJlK,mBAAA,CAAmH,OAAnHmK,WAAmH,EAAAxJ,gBAAA,CAAzDyJ,IAAI,CAACC,SAAS,CAAC9J,MAAA,CAAA4I,eAAe,CAACa,OAAO,2B,0CAIpGhK,mBAAA,CAeM,OAfNsK,WAeM,GAdJtK,mBAAA,CAMS;IALNkE,OAAK,EAAAuC,MAAA,SAAAA,MAAA,OAAA9E,MAAA,IAAEpB,MAAA,CAAA2I,WAAW,CAAC3I,MAAA,CAAA4I,eAAe;IACnCvJ,KAAK,EAAC;MAENU,YAAA,CAAmCC,MAAA;IAAvBX,KAAK,EAAC;EAAc,I,6CAAG,UAErC,G,GACAI,mBAAA,CAMS;IALNkE,OAAK,EAAAuC,MAAA,SAAAA,MAAA,OAAA9E,MAAA,IAAEpB,MAAA,CAAAgK,mBAAmB,CAAChK,MAAA,CAAA4I,eAAe;IAC3CvJ,KAAK,EAAC;MAENU,YAAA,CAAqCC,MAAA;IAAvBX,KAAK,EAAC;EAAc,I,6CAAG,QAEvC,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}